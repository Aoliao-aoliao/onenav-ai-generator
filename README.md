# OneNav AI Generator

一个专为OneNav导航主题设计的WordPress插件，支持多种主流 AI 服务商，自动生成网址详情介绍信息。

## ✨ v1.2.0 新功能

- 🎯 **多 AI 服务商支持**：支持 DeepSeek、阿里云通义千问、七牛云、豆包、OpenAI 等 6 种 AI 服务商
- 🔄 **一键切换**：后台下拉菜单轻松切换 AI 服务商,自动填充配置
- 🎨 **智能模型选择**：根据服务商自动显示可用模型列表
- 📚 **详细文档**：提供完整的 AI 服务商配置指南 ([查看文档](AI-PROVIDERS-GUIDE.md))

## 功能特点

- 🤖 **AI智能生成**：支持 6 种主流 AI 服务商,生成高质量的网站介绍内容
- 🔄 **灵活切换**：支持 DeepSeek、阿里云、七牛云、豆包、OpenAI、自定义 API
- 📝 **一键生成**：在编辑页面点击按钮即可生成详细介绍
- 🔧 **灵活配置**：支持自定义内容结构和提示词
- 📊 **批量处理**：为已发布的网址批量生成介绍
- 🎨 **界面友好**：支持古腾堡和经典编辑器
- ⚙️ **参数可调**：可设置生成字数、API配置等
- 🔒 **安全可靠**：API Key 加密存储,通过 WordPress 安全标准审查

## 安装方法

### 方法一：手动安装

1. 将整个插件文件夹上传到 `/wp-content/plugins/` 目录
2. 在WordPress后台的"插件"页面激活"OneNav AI Generator"
3. 进入"设置" > "OneNav AI Generator"配置插件

### 方法二：压缩包安装

1. 将插件文件打包为zip格式
2. 在WordPress后台选择"插件" > "安装插件" > "上传插件"
3. 上传zip文件并激活

## 配置说明

### AI 服务商设置

1. **AI 服务商选择**：从下拉菜单中选择要使用的 AI 服务商
   - DeepSeek (默认,高性价比)
   - 阿里云通义千问 (国内稳定)
   - 七牛云 (集成度高)
   - 豆包/字节跳动 (长文本)
   - OpenAI (顶级质量)
   - 自定义 API (灵活配置)

2. **AI 模型选择**：根据选择的服务商,自动显示可用模型
   - 不同模型有不同的性能和价格
   - 推荐使用默认模型以获得最佳性价比

3. **API Key**：输入对应 AI 服务商的 API 密钥
   - 密钥使用 AES-256 加密存储
   - 详细获取方法请查看 [AI 服务商配置指南](AI-PROVIDERS-GUIDE.md)

4. **API URL**：API 接口地址
   - 切换服务商时会自动填充
   - 也可以手动修改用于自定义 API

### 内容生成设置

1. **最大生成字数**：控制生成内容的长度（100-4000字）
2. **内容结构模板**：定义生成内容的章节结构
3. **自定义提示词**：指导AI生成内容的提示语

### 快速配置示例

#### 使用阿里云通义千问

```
AI 服务商: 阿里云通义千问
AI 模型: qwen-plus
API Key: sk-xxxxxxxxxxxx (在阿里云 DashScope 获取)
API URL: https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
```

#### 使用 DeepSeek (默认)

```
AI 服务商: DeepSeek
AI 模型: deepseek-chat
API Key: sk-xxxxxxxxxxxx (在 platform.deepseek.com 获取)
API URL: https://api.deepseek.com/v1/chat/completions
```

更多配置详情请查看 **[AI 服务商配置指南](AI-PROVIDERS-GUIDE.md)**

## 使用方法

### 单个网址生成

1. 编辑或新建一个网址文章（sites文章类型）
2. 填写网站标题、链接等基本信息
3. 在编辑页面找到"AI 生成网站介绍"面板
4. 点击"生成AI介绍"按钮
5. 等待生成完成，内容将自动填入编辑器

### 批量生成

1. 进入"工具" > "批量AI生成"页面
2. 点击"开始批量生成"按钮
3. 系统将自动为没有详细介绍的网址生成内容
4. 查看生成进度和结果

## 内容结构示例

默认的内容结构包含以下部分：

```
产品简介

主要功能

使用方法

产品价格

应用场景
```

您可以根据需要自定义这些结构，每行一个部分标题。

## 生成内容示例

基于您提供的模板，插件会生成类似以下结构的内容：

### 产品简介
详细介绍网站的基本信息、背景和定位...

### 主要功能
列举网站的核心功能和特色...

### 使用方法
说明如何使用该网站或服务...

### 产品价格
介绍价格方案和付费模式...

### 应用场景
描述适用的使用场景和目标用户...

## 兼容性

- **WordPress版本**：5.0+
- **PHP版本**：7.4+
- **主题要求**：OneNav导航主题
- **编辑器支持**：古腾堡编辑器、经典编辑器

## 文件结构

```
onenav-ai-generator/
├── onenav-ai-generator.php    # 主插件文件
├── assets/
│   ├── js/
│   │   └── admin.js           # 前端JavaScript
│   └── css/
│       └── admin.css          # 样式文件
└── README.md                  # 说明文档
```

## 注意事项

1. **API费用**：使用 AI API 可能产生费用,请注意控制使用量
2. **网络要求**：需要服务器能够访问对应的 AI API (OpenAI 在国内可能需要代理)
3. **内容质量**：生成的内容质量取决于提供的网站信息完整度和选择的 AI 模型
4. **备份建议**：批量生成前建议备份数据库
5. **服务商选择**：建议根据预算和需求选择合适的 AI 服务商,详见配置指南

## 故障排除

### 常见问题

**Q: 生成失败怎么办？**
A: 检查API密钥是否正确，网络是否能访问DeepSeek API

**Q: 生成的内容不满意？**
A: 可以调整自定义提示词，或者提供更详细的网站信息

**Q: 批量生成中断了？**
A: 可以重新开始批量生成，系统会跳过已有内容的文章

**Q: 在古腾堡编辑器中找不到按钮？**
A: 确保文章类型为"sites"，按钮会出现在右侧设置面板中

### 调试模式

如需调试，可以在WordPress的 `wp-config.php` 文件中添加：

```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
```

## 更新日志

### v1.2.0 (2025-12-30)
- ✨ 新增: 支持 6 种 AI 服务商 (DeepSeek、阿里云、七牛云、豆包、OpenAI、自定义)
- ✨ 新增: 智能模型选择功能
- ✨ 新增: 自动填充 API URL 和模型列表
- 📚 新增: 详细的 AI 服务商配置指南
- 🔧 优化: 配置界面更友好,支持动态交互

### v1.1.0 (2025-12-30)
- 🔒 修复: 13 个安全漏洞 (包括 XSS、SQL 注入、权限检查等)
- 🔐 新增: API Key 加密存储 (AES-256-CBC)
- ⚡ 优化: N+1 查询性能提升 97%
- 📝 新增: 安全审查报告和修复文档

### v1.0.0
- 初始版本发布
- 支持单个和批量生成功能
- 兼容古腾堡和经典编辑器
- 完整的设置页面和用户界面

## 技术支持

如果您在使用过程中遇到问题，可以：

1. 检查WordPress错误日志
2. 确认API配置是否正确
3. 验证网站信息是否完整

## 许可证

本插件基于GPL v2或更高版本许可证发布。

## 贡献

欢迎提交问题报告和功能建议！

---

**注意**：本插件专为OneNav主题设计，在其他主题中可能需要适配。